"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),e}var that,Tab=function(){function t(e){_classCallCheck(this,t),(that=this).main=document.querySelector(e),this.add=this.main.querySelector(".tabadd"),this.ul=this.main.querySelector(".firstnav ul:first-child"),this.fsection=this.main.querySelector(".tabscon"),this.init()}return _createClass(t,[{key:"init",value:function(){this.updateNode(),this.add.onclick=this.addTab;for(var e=0;e<this.lis.length;e++)this.lis[e].index=e,this.lis[e].onclick=this.toggleTab,this.remove[e].onclick=this.removeTab,this.spans[e].ondblclick=this.editTab,this.sections[e].ondblclick=this.editTab}},{key:"updateNode",value:function(){this.lis=this.main.querySelectorAll("li"),this.sections=this.main.querySelectorAll("section"),this.remove=this.main.querySelectorAll(".icon-guanbi"),this.spans=this.main.querySelectorAll(".fisrstnav li span:first-child")}},{key:"toggleTab",value:function(){that.clearClass(),this.className="liactive",that.sections[this.index].className="conactive"}},{key:"clearClass",value:function(){for(var e=0;e<this.lis.length;e++)this.lis[e].className="",this.sections[e].className=""}},{key:"addTab",value:function(){that.clearClass();var e='<section class="conactive">测试'+Math.random()+"</section>";that.ul.insertAdjacentHTML("beforeend",'  <li class="liactive"><span>测试1</span><span class="iconfont icon-guanbi"></span></li>'),that.fsection.insertAdjacentHTML("beforeend",e),that.init()}},{key:"removeTab",value:function(e){e.stopPropagation();var t=this.parentNode.index;that.lis[t].remove(),that.sections[t].remove(),that.init(),document.querySelector(".liactive")||(t--,that.lis[t]&&that.lis[t].click())}},{key:"editTab",value:function(){var e=this.innerHTML;window.getSelection?window.getSelection().removeAllRanges():document.selection.empty(),this.innerHTML='<input type="text"/>';var t=this.children[0];t.value=e,t.select(),t.onblur=function(){this.parentNode.innerHTML=this.value},t.onkeyup=function(e){13===e.keyCode&&this.blur()}}}]),t}();new Tab("#tab");